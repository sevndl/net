@page "/chiffresAffaires"

@inject HttpClient http
@using Facturations.Shared

<h1>Chiffres d'affaires</h1>

<p>Un aperçu des chiffres d'affaires réels et attendus.</p>

@if (data == null)
{
  <p>Interrogation du serveur...</p>
}
else
{
  @if (data.Count() != 0)
  {
    <p>Chiffre d'affaire attendu : @data["caAttendu"] euros.</p>
    <p>Chiffre d'affaire réel : @data["caReel"] euros.</p>
  }
  else
  {
    <p>Chiffre d'affaire attendu : 0 euro.</p>
    <p>Chiffre d'affaire réel : 0 euro.</p>
  }
}

@code {
  private Dictionary<string, double> data = null;

  protected async override Task OnInitializedAsync()
  {
    data = await http.GetFromJsonAsync<Dictionary<string, double>>("api/dashboard");
  }
}